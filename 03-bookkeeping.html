<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>LHCb Starterkit: First Steps in LHCb</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css" />
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     ga('create', 'UA-63818884-1', 'auto');
     ga('send', 'pageview');
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="https://lhcb.github.io/first-analysis-steps/">
          <img src="img/starterkit.png" height="100" alt="LHCb Starterkit">
        </a>
      </div>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <h1 class="title">First Steps in LHCb</h1>
          <h2 class="subtitle">Finding data in the Bookkeeping</h2>
<p>Knowing how data flows through the various Gaudi applications is crucial for knowing where to look for your data.</p>
<p>Data are catalogued in ‘the bookkeeping’, and are initially sorted in broad groups such as ‘real data for physics analysis’, ‘simulated data’, and ‘data for validation studies’. After this, a tree of various application and processing versions will eventually lead to the data you need.</p>
<p>So, before we can run our first DaVinci job we need to locate some events. In this tutorial we will use the decay <span class="math">\(D^{*+} \to D^{0}\pi^{+}\)</span> as an example, where the <span class="math">\(D^{0}\)</span> decays to <span class="math">\(K^{-}\pi^{+}\)</span>.</p>
<div id="learning-objectives" class="objectives panel panel-warning">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Find MC in the bookkeeping</li>
<li>Find data in the bookkeeping</li>
<li>Find the decay you want</li>
<li>check reco</li>
<li>ignore what (flagged) stripping is used</li>
<li>run over those files with the strip21 module you want</li>
<li>nTuples!</li>
</ul>
</div>
</div>
<p>Navigate to the <a href="https://lhcb-portal-dirac.cern.ch/DIRAC/?view=tabs&amp;theme=Grey&amp;url_state=1|*LHCbDIRAC.BookkeepingBrowser.classes.BookkeepingBrowser:,">bookkeeping</a> which lets you find both simulated and real data.</p>
<p>At the bottom of the &quot;Bookkeeping tree&quot; tab there is a drop-down menu labelled <code>Simulation Condition</code>, open it and change it to <code>Event type</code>.</p>
<p>We will analyse 2012 data, and correspondingly use simulation for 2012 data. To navigate to the simulation, expand the folder icon in the &quot;Bookkeeping tree&quot; window. Navigate to the <code>MC/2012</code> folder. This will give you a very long list of all possible decay types for which there is simulated data. We are looking for a folder which is named <code>27163003 (Dst_D0pi,Kpi=DecProdCut)</code>. The number is a numerical representation of the <a href="https://cds.cern.ch/record/855452?ln=en">event type</a>. The text is the human readable version of that.</p>
<p>This sample of simulated events will only contain events where a <span class="math">\(D^{*+} \to D^{0}(\to K^{-}\pi^{+})\pi^{+}\)</span> was generated within the LHCb acceptance, although the decay might not have been fully reconstructed. (Not all simulated samples have the same requirements made on the signal decay.)</p>
<p>If you expand the <code>27163003 (Dst_D0pi,Kpi=DecProdCut)</code> folder you will find several different subfolders to choose from. The names of these subfolders correspond to different data-taking conditions, such as magnet polarity (<code>MagDown</code> and <code>MagUp</code>), as well as different software versions used to create the different samples that are available. We will use <code>Beam4000GeV-2012-MagDown-Nu2.5-Pythia8</code>.</p>
<div id="so-much-choice" class="callout panel panel-info">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-pushpin"></span>So much choice!</h2>
</div>
<div class="panel-body">
<p>Often there are only one or two combinations of data-taking conditions and software versions to choose from, but sometimes there can be very many. Generally newer versions are the best bet, but you should always ask the Monte Carlo liason of your working group for advice on what to use if you're not sure.</p>
</div>
</div>
<p>Next we need to choose what version of the simulation you want to use. Usually the latest available version is best, which is <code>Sim08e</code> in this case. We also have to choose the version of the digitisation and what configuration of the trigger and reconstruction we want to have in the simulated sample. Usually there is only one choice for these, which makes choosing easier.</p>
<p>We also have to select a version of the stripping. Choose any as long as it contains the word <code>Flagged</code>.</p>
<div id="flagged-and-filtered-samples" class="callout panel panel-info">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-pushpin"></span>Flagged and filtered samples</h2>
</div>
<div class="panel-body">
<p>In the usual data-taking flow, the trigger and stripping are run in <em>filtering</em> mode, whereby events that don't pass any trigger line or any stripping line are thrown away. In the simulation, it's often useful to keep such events so that the properties of the rejected events can be studied. The trigger and stripping are then run in <em>flagging</em> mode, such that the decisions are only recorded for later inspection. Filtered Monte Carlo can be produced for analyses that need lots of events.</p>
</div>
</div>
<p>After all this, you will be presented with a <code>ALLSTREAMS.DST</code> entry. By clicking on it we finally see a list of files that we can process. At the bottom right of the page there is a “Save” button which will let us download a file specifying the inputs that we'll use for running our DaVinci job. Click it and select “Save as a python file”. Clicking “Save” once again in the pop-up menu will start the download. Save this file somewhere you can find it again.</p>
<p>A copy of the file we just downloaded is <a href="data/MC_2012_27163003_Beam4000GeV2012MagDownNu2.5Pythia8_Sim08e_Digi13_Trig0x409f0045_Reco14a_Stripping20NoPrescalingFlagged_ALLSTREAMS.DST.py">available here</a>.</p>
<div id="shortcut" class="callout panel panel-info">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-pushpin"></span>Shortcut</h2>
</div>
<div class="panel-body">
<p>Once you get a bit of experience with navigating the bookkeeping you can take a shortcut! At the bottom of your browser window there is a text field next to a green &quot;plus&quot; symbol. You can directly enter a path here to navigate there directly. For example you could go straight to: <code>evt+std://MC/2012/27163003/Beam4000GeV-2012-MagDown-Nu2.5-Pythia8/</code> by typing this path and pressing the <code>Go</code> button.</p>
</div>
</div>
<div id="find-your-own-decay" class="challenge panel panel-success">
<div class="panel-heading">
<h2><span class="glyphicon glyphicon-pencil"></span>Find your own decay!</h2>
</div>
<div class="panel-body">
<p>Think of a decay and try to find a Monte Carlo sample for it. You could use the decay that your analysis is about, or if you don't have any ideas you could look for the semileptonic decay <span class="math">\(\Lambda_{b}^{0} \to \Lambda_{c}^{+}\mu^{-}\bar{\nu}_{\mu}\)</span>, where the <span class="math">\(\Lambda_{c}^{+}\)</span> decays to <span class="math">\(pK^{-}\pi^{+}\)</span>.</p>
<p>If you would like to find out more about how the event types define the signal decay, you can look at the <a href="http://lhcb-release-area.web.cern.ch/LHCb-release-area/DOC/decfiles/">documentation for the DecFiles package</a>.</p>
</div>
</div>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/lhcb/first-analysis-steps">Source</a>
        <a class="label swc-blue-bg" href="mailto:lhcb-starterkit@cern.ch">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/contrib/auto-render.min.js"></script>
    <script>
      // Go KaTeX go!
      renderMathInElement(document.body);
    </script>
  </body>
</html>
